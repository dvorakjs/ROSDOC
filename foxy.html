<pre>
  2024-01-17
     *설치
         -Ubuntu 20.04
         -https://docs.ros.org/en/foxy/Installation/Ubuntu-Install-Debians.html
    
     *환경설정
         -https://docs.ros.org/en/foxy/Tutorials/Beginner-CLI-Tools/Configuring-ROS2-Environment.html
         -source /opt/ros/foxy/setup.bash
         -echo "source /opt/ros/foxy/setup.bash" >> ~/.bashrc
            source 명령어는 스크립트 파일 수정 후에 수정된 값을 바로 적용하기 위해 사용
            ~/bashrc 파일은 유저가 로그인할 때마다 읽어들이는 파일

      *Domain ID
         -export ROS_DOMAIN_ID=<your_domain_id>
         -echo "export ROS_DOMAIN_ID=<your_domain_id>" >> ~/.bashrc
         -ROS2는 통신을 위해 middleware로 DDS사용 
         -Domain ID는 DDS에서 물리적 네트워크를 공유하는 서로 다른 논리적 네트워크에 대한 매커니즘
         -서로 통신하는 노드 그룹은 같은 Domain ID 사용
         -모든 노드들은 Domain ID을 기본 0을 사용

      *LOCALHOST_ONLY 
         export ROS_LOCALHOST_ONLY=1
         echo "export ROS_LOCALHOST_ONLY=1" >> ~/.bashrc
         통신을 localhost에 한정시킴

      *turtlesim
         Simulator
         -설치: sudo apt install ros-foxy-turtlesim      
         -설치확인: ros2 pkg executables turtlesim
         -실행: ros2 run turtlesim turtlesim_node
         -제어노드 실행: ros2 run turtlesim turtle_teleop_key

      *rqt
         GUI 툴
         -설치: sudo apt install ~nros-foxy-rqt*
      
      *Remapping
         -turtle1 노드의 turtle1/cmd_vel 토픽에 turtle2의 turtle2/cmd_vel 할당
         -turtle_teleop_key 명령어 윈도우에서 turtle2 제어 가능
         -ros2 run turtlesim turtle_teleop_key --ros-args --remap turtle1/cmd_vel:=turtle2/cmd_vel
   
   2024-01-17
      *Recording and playing backdata
       -ros2 bag record -o <폴더명> <토픽명> <토픽명> ...
       -폴더명에 해당하는 폴더가 생성되고 폴더 안에는 yaml과 db3 파일 생성됨
       -폴더 자체가 bag 파일임

      *colcon
       -workspace 생성 및 빌드
       -설치: sudo apt install python3-colcon-common-extensions
       -workspace 폴더 생성: mkdir -p ~/ros2_ws/src
       -src 폴더에 source 추가: git clone https://github.com/ros2/examples src/examples -b foxy
        --overlay(workspace)
       -Workspace 빌드: colcon build --symlink-install
        --symlink-install은 원본 파일이 바뀌면 저절로 복사본 바뀌게
       -빌드된 package 테스트: colcon test
       -빌드된 package는 install 폴더에
       -빌드된 package를 사용하려면 해당 package에 대한 경로가 path나 library path에 추가되어야 함
        -- install 폴더에 bash/bat 파일이 생성됨
       -환경 source: source install/setup.bash 
       -여러가지 빌드 타입: ament_cmake, ament_python, ament_cmake
       -ros2 pkg create로도 패키지 생성 가능
       -colcon_cd는 현재 패키지 폴더에서 다른 패키지 폴더로 이동
        --echo "source /usr/share/colcon_cd/function/colcon_cd.sh" >> ~/.bashrc
        --echo "export _colcon_cd_root=/opt/ros/foxy/" >> ~/.bashrc
       -명령어 tab completion
        --echo "source /usr/share/colcon_argcomplete/hook/colcon-argcomplete.bash" >> ~/.bashrc

        *Creating a workspace
        -workspace 생성 및 빌드        
        -workspace 폴더 생성: mkdir -p ~/ros2_ws/src
        -src 폴더에 source 추가: git clone https://github.com/ros/ros_tutorials.git -b foxy-devel
        -dependecy 설치: rosdep install -i --from-path src --rosdistro foxy -y
        -workspace 빌드: colcon build
        -underlay sourcing: 빌드한 터미널에서 하지 말기, ros2_ws에서 하지 말기
         --source /opt/ros/foxy/setup.bashr
        -overlay souring: ros2_ws 폴더에서
         --source install/local_setup.bash
        -modify the overlay
         --~/ros2_ws/src/ros_tutorials/turtlesim/src에 있는 turtle_frame.cpp에서 setWindowTitle("TurtleSim"); 수정
        -빌드한 터미널에서 colcon build
        -다른 터미널에서 ros2 run turtlesim turtlesim_node
        -overlay가 underlay보다 우선순위 높음
        -다른 터미널에서는 underlay 실행됨
        
   2024-01-25
      *Create a package
         1. CMAKE package 또는 python package
          ~ CMAKE
            my_package/
               CMakeLists.txt
               include/my_package/
               package.xml
               src/

          ~ Python      
            my_package/
               package.xml
               resource/my_package
               setup.cfg
               setup.py
               my_package/
         - 하나의 workspace에 타입 다른 package 생성 가능
          ~ workspace의 서브폴더로 "src" 생성
            1. cd ~/ros2_ws/src
            2-1. ros2 pkg create --build-type ament_cmake <package_name>(CMAKE)
                 ros2 pkg create --build-type ament_python <package_name>(Python)

            2-2. --node-name 추가
                 ros2 pkg create --build-type ament_cmake --node-name my_node my_package(CMAKE)
                 ros2 pkg create --build-type ament_python --node-name my_node my_package(Python)
                 
         2. colcon을 사용하여 한꺼번에 package 생성
          cd ~/ros2_ws
          colcon build 
         3. Source the setup file
           ~ source install/local_setup.bash      
           
      * 간단한 publisher와 subscriber 생성(C++)
         *Create a package
         1. CMAKE package 또는 python package(ros2_ws/src에서)
            ros2 pkg create --build-type ament_pycmake cpp_pubsub   
         2. publisher node 생성(ros2_ws/src/cpp_pubsub/src)
            wget -O publisher_member_function.cpp https://raw.githubusercontent.com/ros2/examples/foxy/rclcpp/topics/minimal_publisher/member_function.cpp 
         3. dependency 추가
            ~ package.xml에서 <description>, <maintainer>, <license> 수정, <depend>rclcpp</depend>, <depend>std_msgs</depend> 추가
         4. CMakeLists.txt 수정
            ~ find_package(rclcpp REQUIRED), find_package(std_msgs REQUIRED) 추가
            ~ add_executable(talker src/publisher_member_function.cpp), ament_target_dependencies(talker rclcpp std_msgs) 추가
            ~ install(TARGETS talker DESTINATION lib/${PROJECT_NAME}) 추가
         5. subscriber node 생성(ros2_ws/src/cpp_pubsub/src)
            wget -O subscriber_member_function.cpp https://raw.githubusercontent.com/ros2/examples/foxy/rclcpp/topics/minimal_subscriber/member_function.cpp
         6. CMakeLists.txt 수정
            add_executable(listener src/subscriber_member_function.cpp)
            ament_target_dependencies(listener rclcpp std_msgs)
            
            install(TARGETS
            talker
            listener
            DESTINATION lib/${PROJECT_NAME})
         7. build and run(ros2_ws에서)
            ~ dependency check
              rosdep install -i --from-path src --rosdistro foxy -y
            ~ build 
              colcon build --packages-select cpp_pubsub
         8. source the setup file in a new terminal(ros2_ws에서)
            . install/setup.bash
         9. run the talker
            ros2 run cpp_pubsub talker
         10. 새로운 터미널에서 lisener 실행(ros2_ws에서)
            . install/setup.bash           
            ros2 run cpp_pubsub listener

      * 간단한 publisher와 subscriber 생성(python)
      *Create a package
      1. CMAKE package 또는 python package(ros2_ws/src에서)
         ros2 pkg create --build-type ament_python py_pubsub   
      2. publisher node 생성(ros2_ws/src/py_pubsub/py_pubsub)
         wget https://raw.githubusercontent.com/ros2/examples/foxy/rclpy/topics/minimal_publisher/examples_rclpy_minimal_publisher/publisher_member_function.py
      3. dependency 추가(ros2_ws/src/py_pubsub)
         ~ package.xml에서 <description>, <maintainer>, <license> 수정, <exec_depend>rclpy</exec_depend>, <exec_depend>std_msgs</exec_depend> 추가
      4. entry point 추가
         ~ setup.py 수정       
         ~ package.xml의 maintainer, maintainer_email, description, license 일치시킴
         ~ 'talker = py_pubsub.publisher_member_function:main'를 entry_points의 console_scripts에 추가  
      5. setup.cfg 확인
         ~ 실행파일 위치: $base/lib               
      6. subscriber node 생성(ros2_ws/src/py_pubsub/py_pubsub)
         wget https://raw.githubusercontent.com/ros2/examples/foxy/rclpy/topics/minimal_subscriber/examples_rclpy_minimal_subscriber/subscriber_member_function.py
      7. entry point 추가
         ~ setup.py 수정        
         ~ 'listener = py_pubsub.subscriber_member_function:main',        
      8. build and run(ros2_ws에서)
         ~ dependency check
           rosdep install -i --from-path src --rosdistro foxy -y
         ~ build 
           colcon build --packages-select py_pubsub
      9. source the setup file in a new terminal(ros2_ws에서)
         . install/setup.bash
      10. run the talker
         ros2 run py_pubsub talker
      11. 새로운 터미널에서 lisener 실행(ros2_ws에서)
         . install/setup.bash           
         ros2 run py_pubsub listener      

</pre>
